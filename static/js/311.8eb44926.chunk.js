"use strict";(self.webpackChunkreact_base_app=self.webpackChunkreact_base_app||[]).push([[311],{311:function(t,e,r){r.r(e),r.d(e,{encodeIntoResult:function(){return m},stegaEncodeSourceMap:function(){return E},stegaEncodeSourceMap$1:function(){return S}});var n=r(2982),o=r(7762),a=r(1413),i=r(885),c=r(6948),u=/_key\s*==\s*['"](.*)['"]/;function s(t){if(!Array.isArray(t))throw new Error("Path is not an array");return t.reduce((function(t,e,r){var n=typeof e;if("number"===n)return"".concat(t,"[").concat(e,"]");if("string"===n)return"".concat(t).concat(0===r?"":".").concat(e);if(function(t){return"string"==typeof t?u.test(t.trim()):"object"==typeof t&&"_key"in t}(e)&&e._key)return"".concat(t,'[_key=="').concat(e._key,'"]');if(Array.isArray(e)){var o=(0,i.Z)(e,2),a=o[0],c=o[1];return"".concat(t,"[").concat(a,":").concat(c,"]")}throw new Error("Unsupported path segment `".concat(JSON.stringify(e),"`"))}),"")}var l={"\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","'":"\\'","\\":"\\\\"},f={"\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t","\\'":"'","\\\\":"\\"};function p(t){for(var e,r=[],n=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;null!==(e=n.exec(t));)if(void 0===e[1])if(void 0===e[2])if(void 0===e[3]);else{var o=e[3].replace(/\\(\\')/g,(function(t){return f[t]}));r.push({_key:o,_index:-1})}else r.push(parseInt(e[2],10));else{var a=e[1].replace(/\\(\\|f|n|r|t|')/g,(function(t){return f[t]}));r.push(a)}return r}function d(t){return t.map((function(t){if("string"==typeof t||"number"==typeof t)return t;if(""!==t._key)return{_key:t._key};if(-1!==t._index)return t._index;throw new Error("invalid segment:".concat(JSON.stringify(t)))}))}function h(t,e){if(null!==e&&void 0!==e&&e.mappings){var r=function(t){return"$".concat(t.map((function(t){return"string"==typeof t?"['".concat(t.replace(/[\f\n\r\t'\\]/g,(function(t){return l[t]})),"']"):"number"==typeof t?"[".concat(t,"]"):""!==t._key?"[?(@._key=='".concat(t._key.replace(/['\\]/g,(function(t){return l[t]})),"')]"):"[".concat(t._index,"]")})).join(""))}(t.map((function(t){if("string"==typeof t||"number"==typeof t)return t;if(-1!==t._index)return t._index;throw new Error("invalid segment:".concat(JSON.stringify(t)))})));if(void 0!==e.mappings[r])return{mapping:e.mappings[r],matchedPath:r,pathSuffix:""};var n=Object.entries(e.mappings).filter((function(t){var e=(0,i.Z)(t,1)[0];return r.startsWith(e)})).sort((function(t,e){var r=(0,i.Z)(t,1)[0];return(0,i.Z)(e,1)[0].length-r.length}));if(0!=n.length){var o=(0,i.Z)(n[0],2),a=o[0];return{mapping:o[1],matchedPath:a,pathSuffix:r.substring(a.length)}}}}function v(t){return null!==t&&Array.isArray(t)}function g(t){return"object"==typeof t&&null!==t}function y(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return v(t)?t.map((function(t,n){if(g(t)){var o=t._key;if("string"==typeof o)return y(t,e,r.concat({_key:o,_index:n}))}return y(t,e,r.concat(n))})):g(t)?Object.fromEntries(Object.entries(t).map((function(t){var n=(0,i.Z)(t,2),o=n[0];return[o,y(n[1],e,r.concat(o))]}))):e(t,r)}function m(t,e,r){return y(t,(function(t,n){if("string"!=typeof t)return t;var o=h(n,e);if(!o)return t;var a=o.mapping,i=o.matchedPath;if("value"!==a.type||"documentValue"!==a.source.type)return t;var c=e.documents[a.source.document],u=e.paths[a.source.path],s=p(i),l=p(u).concat(n.slice(s.length));return r({sourcePath:l,sourceDocument:c,resultPath:n,value:t})}))}var b="drafts.";function k(t){var e=t.baseUrl,r=t.workspace,n=void 0===r?"default":r,o=t.tool,a=void 0===o?"default":o,i=t.id,c=t.type,u=t.path,l=t.projectId,f=t.dataset;if(!e)throw new Error("baseUrl is required");if(!u)throw new Error("path is required");if(!i)throw new Error("id is required");if("/"!==e&&e.endsWith("/"))throw new Error("baseUrl must not end with a slash");var p="default"===n?void 0:n,h="default"===a?void 0:a,v=function(t){return t.startsWith(b)?t.slice(b.length):t}(i),g=Array.isArray(u)?s(d(u)):u,y=new URLSearchParams({baseUrl:e,id:v,type:c,path:g});p&&y.set("workspace",p),h&&y.set("tool",h),l&&y.set("projectId",l),f&&y.set("dataset",f),i.startsWith(b)&&y.set("isDraft","");var m=["/"===e?"":e];p&&m.push(p);var k=["mode=presentation","id=".concat(v),"type=".concat(c),"path=".concat(encodeURIComponent(g))];return h&&k.push("tool=".concat(h)),m.push("intent","edit","".concat(k.join(";"),"?").concat(y)),m.join("/")}var _=function(t){var e,r=t.sourcePath,n=t.resultPath,o=t.value;if(/^\d{4}-\d{2}-\d{2}/.test(e=o)&&Date.parse(e)||function(t){try{new URL(t,t.startsWith("/")?"https://acme.com":void 0)}catch(e){return!1}return!0}(o))return!1;var a=r.at(-1);return!("slug"===r.at(-2)&&"current"===a||"string"==typeof a&&a.startsWith("_")||"number"==typeof a&&"marks"===r.at(-2)||"href"===a&&"number"==typeof r.at(-2)&&"markDefs"===r.at(-3)||"style"===a||"listItem"===a||r.some((function(t){return"meta"===t||"metadata"===t||"openGraph"===t||"seo"===t}))||U(r)||U(n)||"string"==typeof a&&w.has(a))},w=new Set(["color","colour","currency","email","format","gid","hex","href","hsl","hsla","icon","id","index","key","language","layout","link","linkAction","locale","lqip","page","path","ref","rgb","rgba","route","secret","slug","status","tag","template","theme","type","unit","url","username","variant","website"]);function U(t){return t.some((function(t){return"string"==typeof t&&null!==t.match(/type/i)}))}function E(t,e,r){var i,s=r.filter,l=r.logger;if(!r.enabled){var f,p="config.enabled must be true, don't call this function otherwise";throw null!==l&&void 0!==l&&null!==(f=l.error)&&void 0!==f&&f.call(l,"[@sanity/client]: ".concat(p),{result:t,resultSourceMap:e,config:r}),new TypeError(p)}if(!e)return null!==l&&void 0!==l&&null!==(i=l.error)&&void 0!==i&&i.call(l,"[@sanity/client]: Missing Content Source Map from response body",{result:t,resultSourceMap:e,config:r}),t;if(!r.studioUrl){var d,h="config.studioUrl must be defined";throw null!==l&&void 0!==l&&null!==(d=l.error)&&void 0!==d&&d.call(l,"[@sanity/client]: ".concat(h),{result:t,resultSourceMap:e,config:r}),new TypeError(h)}var v={encoded:[],skipped:[]},g=m(t,e,(function(t){var e=t.sourcePath,n=t.sourceDocument,o=t.resultPath,i=t.value;if(!1===("function"==typeof s?s({sourcePath:e,resultPath:o,filterDefault:_,sourceDocument:n,value:i}):_({sourcePath:e,resultPath:o,filterDefault:_,sourceDocument:n,value:i})))return l&&v.skipped.push({path:P(e),value:"".concat(i.slice(0,20)).concat(i.length>20?"...":""),length:i.length}),i;l&&v.encoded.push({path:P(e),value:"".concat(i.slice(0,20)).concat(i.length>20?"...":""),length:i.length});var u=function(t){var e="string"==typeof t?t:t.baseUrl;return"/"!==e&&(e=e.replace(/\/$/,"")),"string"==typeof t?{baseUrl:e}:(0,a.Z)((0,a.Z)({},t),{},{baseUrl:e})}("function"==typeof r.studioUrl?r.studioUrl(n):r.studioUrl),f=u.baseUrl,p=u.workspace,d=u.tool;if(!f)return i;var h=n._id,g=n._type,y=n._projectId,m=n._dataset;return(0,c.C)(i,{origin:"sanity.io",href:k((0,a.Z)({baseUrl:f,workspace:p,tool:d,id:h,type:g,path:e},!r.omitCrossDatasetReferenceData&&{dataset:m,projectId:y}))},!1)}));if(l){var y,b,w,U,E,S=v.skipped.length,j=v.encoded.length;if((S||j)&&(null!==(y=(null===l||void 0===l?void 0:l.groupCollapsed)||l.log)&&void 0!==y&&y("[@sanity/client]: Encoding source map into result"),null!==(b=l.log)&&void 0!==b&&b.call(l,"[@sanity/client]: Paths encoded: ".concat(v.encoded.length,", skipped: ").concat(v.skipped.length))),v.encoded.length>0&&(null!==l&&void 0!==l&&null!==(w=l.log)&&void 0!==w&&w.call(l,"[@sanity/client]: Table of encoded paths"),null!==(U=(null===l||void 0===l?void 0:l.table)||l.log)&&void 0!==U&&U(v.encoded)),v.skipped.length>0){var x,D,Z=new Set,A=(0,o.Z)(v.skipped);try{for(A.s();!(D=A.n()).done;){var I=D.value.path;Z.add(I.replace(u,"0").replace(/\[\d+\]/g,"[]"))}}catch(M){A.e(M)}finally{A.f()}null===l||void 0===l||null===(x=l.log)||void 0===x||x.call(l,"[@sanity/client]: List of skipped paths",(0,n.Z)(Z.values()))}(S||j)&&(null===l||void 0===l||null===(E=l.groupEnd)||void 0===E||E.call(l))}return g}function P(t){return s(d(t))}var S=Object.freeze({__proto__:null,stegaEncodeSourceMap:E})}}]);
//# sourceMappingURL=311.8eb44926.chunk.js.map